<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大葉大學 資訊工程學系</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 載入 Noto Sans TC 字體 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 設置基本字體與平滑捲動 */
/* ... existing code ... -->
        .content-card {
            @apply bg-white p-8 rounded-lg shadow-lg;
        }

        /* Gemini 功能所需的額外樣式 */
        
        /* 彈出視窗 (Modal) */
        .modal {
            @apply fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300 opacity-0 pointer-events-none;
        }
        .modal.active {
            @apply opacity-100 pointer-events-auto;
        }
        .modal-content {
            @apply bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto transform scale-95 transition-transform duration-300;
        }
        .modal.active .modal-content {
            @apply scale-100;
        }
        .modal-close {
            @apply absolute top-4 right-6 text-white text-4xl font-bold cursor-pointer hover:text-gray-300;
        }
        .modal-body h4 {
            @apply text-xl font-bold text-blue-700 mb-3;
        }
        .modal-body p {
            @apply text-gray-700 mb-4 leading-relaxed;
        }
        .modal-body ul {
            @apply list-disc list-inside text-gray-700 mb-4 ml-4 space-y-1;
        }

        /* 載入指示器 (Spinner) */
        .spinner {
            @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-16 h-16 border-8 border-blue-200 border-t-blue-600 rounded-full animate-spin hidden;
        }
        .spinner.active {
            @apply block;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 1. 導覽列 (Header/Navigation) -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-blue-700">大葉大學 資訊工程學系</div>
            <div class="space-x-6 hidden md:block">
                <a href="#history" class="text-gray-600 hover:text-blue-700 transition-colors">學系沿革</a>
                <a href="#objectives" class="text-gray-600 hover:text-blue-700 transition-colors">教育目標</a>
                <a href="#features" class="text-gray-600 hover:text-blue-700 transition-colors">系所特色</a>
                <a href="#careers" class="text-gray-600 hover:text-blue-700 transition-colors">畢業出路</a>
            </div>
            <!-- 手機版選單 (簡易) -->
            <div class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </div>
        </nav>
    </header>

    <!-- 2. 英雄區塊 (Hero Section) -->
    <section class="bg-blue-700 text-white py-24">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-5xl font-bold mb-4">大葉大學 資訊工程學系</h1>
            <p class="text-xl text-blue-100">培育兼具電腦軟體、硬體實務的頂尖資訊工程師</p>
        </div>
    </section>

    <!-- 3. 網頁主內容 (Main Content) -->
    <main class="container mx-auto px-6 py-20 space-y-24">

        <!-- 3.1 學系沿革 (History) -->
        <section id="history" class="content-card">
            <h2 class="section-title">學系沿革</h2>
            <div class="space-y-4 text-gray-700 leading-relaxed max-w-4xl mx-auto">
                <p>大葉大學資訊工程學系於民國86年8月1日成立大學部，自89學年度正式招生碩士班研究生，92學年度正式招收碩士在職專班研究生(於96學年度起停招)，開啟了大葉大學資訊工程學系的歷史。</p>
                <p>本系目前招收碩士班及大學部學生，碩士班入學管道：碩士班甄試及考試入學；大學部入學管道：大學繁星推薦、申請入學、分發入學及四技二專甄選入學(資電類)及運動績優獨招。</p>
                <p>本系課程已通過中華工程教育學會（IEET）工程及科技教育認證。「無所不在、無遠弗屆、無微不至」是目前資訊界最佳的寫照，本系旨在培育電腦軟體、硬體兼顧的資訊工程師。</p>
                <p>本系成立多年來，畢業系友約有三分之一再升學，就業系友之「月均薪」高於私立大學資工系畢業生，詳情參閱104人力銀行之「升學就業地圖」。</p>
            </div>
        </section>

        <!-- 3.2 教育目標 (Objectives) -->
        <section id="objectives">
            <h2 class="section-title">教育目標</h2>
            <div class="grid md:grid-cols-2 gap-8">
                
                <!-- 大學部 -->
                <div class="content-card">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">大學部</h3>
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標1：培養學生在資訊工程領域的基本專業技能</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備資訊工程領域應用所需的數學、科學及工程知識</li>
                                <li>具備工程實務所需技術與使用工具的能力</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標2：培養學生應用資訊工程專業能力以解決學術研究與工程實務問題</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備實驗設計、執行與數據分析解釋的能力</li>
                                <li>具備專案計畫規劃、執行與報告撰寫的能力</li>
                                <li>具備系統設計與整合的能力</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標3：培養學生良好工作態度、國際觀與終身學習的能力</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備團隊合作能力與溝通技巧</li>
                                <li>具備工程倫理與國際觀</li>
                                <li>具備持續學習的習慣與能力</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 碩士班 -->
                <div class="content-card">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">碩士班</h3>
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標1：培養學生在資訊工程領域的專業知能</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備資訊工程領域的專業知識</li>
                                <li>具備軟硬體設計與系統整合的能力</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標2：培養學生獨立發掘、分析及解決問題的能力</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備應用相關數學、科學及工程原理解決工程技術或學術研究問題的能力</li>
                                <li>具備撰寫研究成果報告的能力</li>
                            </ul>
                        </div>
                        <!-- 簡化顯示，整合3-6 -->
                        <div>
                            <h4 class="text-lg font-semibold text-blue-700">目標3-6：培養溝通、領導、國際觀與終身學習能力</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1 pl-2">
                                <li>具備溝通協調與團隊合作的能力</li>
                                <li>具備專題規劃、專案執行與領導管理的能力</li>
                                <li>具備應用外語的能力並瞭解全球產業趨勢</li>
                                <li>具備自我學習與使用網路資源的能力</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3.3 系所特色 (Features) -->
        <section id="features" class="space-y-16">
            <h2 class="section-title">系所特色</h2>
            
            <!-- 三大專業領域 -->
            <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">三大專業領域</h3>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- 人工智慧 -->
                    <div class="content-card text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17.25l.038-.038A5.25 5.25 0 0112 13.5a5.25 5.25 0 012.212 4.212l.038.038m-4.424 0l.038.038a5.25 5.25 0 004.424 0l.038-.038M12 8.25a.75.75 0 100-1.5.75.75 0 000 1.5zM12 15a.75.75 0 100-1.5.75.75 0 000 1.5z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM3.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zM3.75 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM5.625 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM5.625 15a.75.75 0 100-1.5.75.75 0 000 1.5zM5.625 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM7.5 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM7.5 15a.75.75 0 100-1.5.75.75 0 000 1.5zM7.5 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM9.375 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM9.375 15a.75.75 0 100-1.5.75.75 0 000 1.5zM9.375 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM14.625 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM14.625 15a.75.75 0 100-1.5.75.75 0 000 1.5zM14.625 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM16.5 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM16.5 15a.75.75 0 100-1.5.75.75 0 000 1.5zM16.5 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM18.375 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM18.375 15a.75.75 0 100-1.5.75.75 0 000 1.5zM18.375 17.25a.75.75 0 100-1.5.75.75 0 000 1.5zM20.25 13.5a.75.75 0 100-1.5.75.75 0 000 1.5zM20.25 15a.75.75 0 100-1.5.75.75 0 000 1.5zM20.25 17.25a.75.75 0 100-1.5.75.75 0 000 1.5z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 00-6-6h12a6 6 0 00-6 6zM12 6.75a2.25 2.25 0 00-2.25 2.25v.75H12v-.75a2.25 2.25 0 00-2.25-2.25zM14.25 6.75a2.25 2.25 0 00-2.25 2.25v.75h2.25v-.75a2.25 2.25 0 00-2.25-2.25z" />
                        </svg>
                        <h4 class="text-xl font-bold mb-2">人工智慧</h4>
                        <p class="text-gray-700">深度學習、機器視覺、擴增實境、語音辨識、智慧機器人。</p>
                    </div>
                    <!-- 物聯網 -->
                    <div class="content-card text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.038a5.25 5.25 0 017.424 0M5.136 12.001a8.25 8.25 0 0113.728 0M2.001 8.965a11.25 11.25 0 0119.998 0" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a.75.75 0 100-1.5.75.75 0 000 1.5z" />
                        </svg>
                        <h4 class="text-xl font-bold mb-2">物聯網</h4>
                        <p class="text-gray-700">感測器（多媒體）、嵌入式系統、資料庫、數據分析與通訊、手機程式開發。</p>
                    </div>
                    <!-- 雲端運算 -->
                    <div class="content-card text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.758A3.75 3.75 0 0013.5 6.75H13.5C10.602 6.75 8.25 9.102 8.25 12V12a4.5 4.5 0 00-4.5-4.5H3.75A2.25 2.25 0 001.5 9.75v1.5a2.25 2.25 0 002.25 2.25H2.25z" />
                        </svg>
                        <h4 class="text-xl font-bold mb-2">雲端運算</h4>
                        <p class="text-gray-700">伺服器系統、雲端技術、資訊安全、Web軟體設計、數據分析、行動應用程式開發、網路程式開發。</p>
                    </div>
                </div>
            </div>

            <!-- 優質教學保證 -->
            <div class="content-card grid md:grid-cols-3 gap-8 items-center">
                <div class="md:col-span-2">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">優質教學保證</h3>
                    <p class="text-lg font-semibold text-blue-700 mb-4">本系已通過中華工程教育學會 (IEET) 認證</p>
                    <div class="space-y-4 text-gray-700 leading-relaxed">
                        <p>大葉資工系面對進入高等教育系統的學生素質的差異、產业界對高學歷人力的需求及工程教育國際化的趨勢，希望能透過工程及科技教育認證，以確保本系教育的品質並提升本系畢業生的素質。</p>
                        <p>透過認證委員的專業判斷，足以證明本系確實已認真提供教師及學生一個專業成長的環境，在本系的努力之下，畢業生多能具備執行專業工作的基本核心能力，並且透過定期評估及持續改善機制，邁向教學卓越。</p>
                    </div>
                </div>
                <!-- IEET 認證標誌 -->
                <div class="flex justify-center items-center">
                    <div class="bg-blue-50 text-blue-800 p-8 rounded-lg text-center w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 mx-auto text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.333 9-6.03 9-11.623 0-1.306-.333-2.541-.94-3.651A11.959 11.959 0 0115 2.714" />
                        </svg>
                        <p class="font-bold text-xl mt-4">IEET 認證</p>
                        <p class="text-sm">國際工程及科技教育認證</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3.4 畢業出路 (Careers) -->
        <section id="careers" class="space-y-16">
            <h2 class="section-title">畢業出路</h2>
            
            <!-- 說明文字 -->
            <div class="content-card">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">寬廣的職涯發展</h3>
                <div class="space-y-4 text-gray-700 leading-relaxed">
                    <p>配合國家政策以及世界潮流，資訊工程的人才供不應求，就業領域遍及工業界、服務業、金融業、政府機關及學術研究等相關單位，畢業生未來的出路十分寬廣。畢業生可選擇的產業由高科技的半導體/積體電路產業、通訊產業、光電產業、電腦及周邊產業、數位內容產業及資訊服務產業等高科技產業等之外，其他傳統產業在導入自動化以及智慧化時，也需要大量的資訊工程的人才，提供大數據、人工智慧等技術，以促進產業的升級。</p>
                    <p>同学在求學的過程中，除接受專業課程的教導以充實本職學能之外，配合國際證照以及全職實習等實務訓練，在就業前就具備較強的職場競爭力。</p>
                </div>
            </div>

            <!-- 熱門職位 -->
            <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">熱門職位</h3>
                <div class="flex flex-wrap justify-center gap-3">
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">遊戲程式設計師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">多媒體程式設計師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">多媒體動畫設計師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">網站程式設計師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">影像處理軟體工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">資訊安全工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">電腦網路專業人員</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">網路工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">通訊軟體工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">硬體設備工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">韌體工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">系統工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">測試工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">電腦組裝/維修/測試人員</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">行動應用程式系統工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">資料庫設計師/管理師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">系統分析工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">軟體設計工程師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">程式設計師</span>
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-medium">MIS系統工程師</span>
                </div>
            </div>

            <!-- ✨✨✨ [NEW] Gemini API 功能 ✨✨✨ -->
            <div class="content-card">
                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">✨ AI 職涯深度解析</h3>
                <p class="text-gray-700 text-center mb-6 max-w-xl mx-auto">對某個職位感到好奇嗎？選擇一個職位，讓 AI 為您分析該職位在台灣的詳細工作內容、所需技能與職涯展望。</p>
                <div class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto">
                    <select id="job-select" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                        <option value="">-- 請選擇一個職位 --</option>
                        <option value="資訊安全工程師">資訊安全工程師</option>
                        <option value="遊戲程式設計師">遊戲程式設計師</option>
                        <option value="人工智慧工程師">人工智慧工程師</option>
                        <option value="資料庫管理師">資料庫管理師</option>
                        <option value="行動應用程式系統工程師">行動應用程式系統工程師</option>
                        <option value="雲端工程師">雲端工程師</option>
                    </select>
                    <button id="gemini-career-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300 flex-shrink-0">
                        ✨ 開始分析
                    </button>
                </div>
                <p id="gemini-error" class="text-red-500 text-center mt-4 hidden">請先選擇一個職位。</p>
            </div>
            <!-- [END] Gemini API 功能 -->


            <!-- 知名廠商 -->
            <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">知名就業廠商 (依領域)</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">物聯網(IoT)</h4>
                        <p class="text-gray-700">中華電信、光寶科技、中興保全、柯思科技。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">遊戲與多媒體製作</h4>
                        <p class="text-gray-700">向上遊戲、傳奇網路遊戲、宇峻奧汀科技、天下數位科技、中華網龍、鈊象電子、遊戲橘子。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">資訊安全</h4>
                        <p class="text-gray-700">中華資安、精誠資訊、數聯資安、趨勢科技、資訊工業策進會。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">人工智慧</h4>
                        <p class="text-gray-700">鼎新電腦、義隆電子、華邦電子、工業技術研究院、台達電子、仁寶電腦。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">大數據技術</h4>
                        <p class="text-gray-700">網路家庭(PCHome)、富邦多媒體、鴻海精密、富邦銀行、三陽工業、裕隆集團。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">電腦網路系統</h4>
                        <p class="text-gray-700">聯發科技、環鴻科技、巨大機械、台達電子、瑞昱半導體、合勤科技。</p>
                    </div>
                    <div class="content-card">
                        <h4 class="text-xl font-semibold text-gray-800 mb-3">資料庫管理設計</h4>
                        <p class="text-gray-700">神通資訊、星宇航空、鴻海精密、華碩電腦、鈊象電子、遊戲橘子、精銳資訊。</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- 4. 頁腳 (Footer) -->
    <footer class="bg-gray-800 text-gray-300 py-12 mt-16">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 大葉大學 資訊工程學系. All rights reserved.</p>
        </div>
    </footer>

    <!-- [NEW] Gemini API 功能所需的 HTML 元素 -->
    
    <!-- 載入指示器 -->
    <div id="spinner" class="spinner"></div>

    <!-- 彈出視窗 (Modal) -->
    <div id="result-modal" class="modal">
        <div class="modal-close" id="modal-close-btn">&times;</div>
        <div class="modal-content">
            <h3 id="modal-title" class="text-3xl font-bold text-gray-900 mb-6"></h3>
            <div id="modal-body" class="modal-body">
                <!-- AI 生成的內容將注入此處 -->
            </div>
        </div>
    </div>

    <!-- [NEW] Gemini API 呼叫邏輯 -->
    <script>
        // 獲取 DOM 元素
        const geminiBtn = document.getElementById('gemini-career-btn');
        const jobSelect = document.getElementById('job-select');
        const modal = document.getElementById('result-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const spinner = document.getElementById('spinner');
        const errorMessage = document.getElementById('gemini-error'); // 獲取錯誤訊息元素

        // Gemini API 設置
        const API_KEY = "AIzaSyBka900-t9n890QxML4h4iWtBqVvp9Bqrw"; // 將 API 金鑰留空，Canvas 將自動處理
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;

        // 顯示/隱藏 Spinner
        const showSpinner = () => spinner.classList.add('active');
        const hideSpinner = () => spinner.classList.remove('active');

        // 顯示/隱藏 Modal
        const showModal = (title, content) => {
            modalTitle.innerText = title;
            // 簡單的 Markdown 轉換
            let htmlContent = content
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // 1. 粗體
                .replace(/(\n|^)\s*\* (.*)/g, '$1<li>$2</li>'); // 2. 點列

            // 3. 將點列組合包裹在 <ul> 中 (使用 's' flag 來匹配換行)
            htmlContent = htmlContent.replace(/(<li>.*<\/li>)/gs, '<ul>$1</ul>');
            //   修復多個 < ul > 標籤（如果列表被分開）
            htmlContent = htmlContent.replace(/<\/ul>\s*<ul>/gs, '');

            // 4. 最後才將換行符轉為 <br>
            htmlContent = htmlContent.replace(/\n/g, '<br>');
            
            // 5. 清理 <br> 標籤
            htmlContent = htmlContent.replace(/<br>\s*<ul>/g, '<ul>');
            htmlContent = htmlContent.replace(/<\/ul>\s*<br>/g, '</ul>');
            htmlContent = htmlContent.replace(/<br>\s*<li>/g, '<li>');
            htmlContent = htmlContent.replace(/<\/li>\s*<br>/g, '</li>');
            
            modalBody.innerHTML = htmlContent;
            modal.classList.add('active');
        };
        const closeModal = () => modal.classList.remove('active');

        // 關閉 Modal 的事件監聽
        modalCloseBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        /**
         * 呼叫 Gemini API
         * @param {string} userPrompt - 發送給模型的用戶提示
         * @param {string} systemPrompt - 用於指導模型的系統提示
         * @returns {Promise<string>} - 模型的回應文字
         */
        async function callGemini(userPrompt, systemPrompt) {
            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            let response;
            let retries = 3;
            let delay = 1000;

            // 實作指數退避重試
            for (let i = 0; i < retries; i++) {
                try {
                    response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error("API 回應格式不正確");
                        }
                    } else if (response.status === 429 || response.status >= 500) {
                        // 如果是速率限制或伺服器錯誤，則重試
                        throw new Error(`API 錯誤，狀態碼: ${response.status}`);
                    } else {
                        // 對於其他客戶端錯誤 (例如 400 Bad Request)，立即失敗
                        const errorResult = await response.json();
                        console.error("API 請求失敗:", errorResult);
                        return `請求失敗: ${errorResult.error?.message || '未知錯誤'}`;
                    }
                } catch (error) {
                    console.warn(`第 ${i + 1} 次重試失敗: ${error.message}`);
                    if (i < retries - 1) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // 指數增加延遲
                    } else {
                        return "AI 服務目前無法連線，請稍後再試。";
                    }
                }
            }
        }

        // 按鈕點擊事件
        geminiBtn.addEventListener('click', async () => {
            errorMessage.classList.add('hidden'); // 每次點擊時先隱藏錯誤
            const selectedJob = jobSelect.value;
            if (!selectedJob) {
                errorMessage.classList.remove('hidden'); // 顯示錯誤訊息
                return;
            }

            showSpinner();

            // 準備發送給 Gemini 的提示
            const systemPrompt = "你是一位在台灣科技業服務的資深職涯顧問。請使用繁體中文回答。你的回答應該專業、友善且結構清晰。";
            const userPrompt = `請幫我詳細分析「${selectedJob}」這個職位。請使用 Markdown 格式，並包含以下三個主要標題：

1.  **主要職責** (條列說明)
2.  **關鍵技能** (條列說明需要哪些技術和軟技能)
3.  **職涯展望** (1-2 句話總結在台灣的發展性)`;

            try {
                const aiResponse = await callGemini(userPrompt, systemPrompt);
                showModal(`職位分析：${selectedJob}`, aiResponse);
            } catch (error) {
                console.error("Gemini 呼叫失敗:", error);
                showModal("分析失敗", "抱歉，目前無法取得 AI 分析結果，請稍後再試。");
            } finally {
                hideSpinner();
            }
        });

    </script>

</body>
</html>